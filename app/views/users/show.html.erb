<div class='group-form'>
  <h1>新規グループ</h1>
  <%=form_with model: @group, local: true do |f|%>
    <div class='group-form__field'>
      <div class='group-form__field--left'>
        <%= f.label :グループ名, class: 'group-form__label'%>
      </div>
      <div class='group-form__field--right'>
        <%= f.text_field :name, class: 'group_name group-form__input', placeholder: 'グループ名を入力してください'%>
      </div>
    </div>
    <div class='group-form__field'>
    </div>
    <div class='group-form__field'>
      <div class='group-form__field--left'>
        <label class='group-form__label' for='group_グループメンバー'>グループメンバー</label>
      </div>
      <div class='group-form__field--right'>
        <select name="room[user_ids][]">
          <option value="">グループに招待するユーザーを選んでください</option>
          <% User.all.where.not(id: current_user.id).each do |user| %>
            <option value=<%= user.id %>><%= user.name %></option>
          <% end %>
        </select>
        <input name="room[user_ids][]" type="hidden" value=<%= current_user.id %>>
      </div>
    </div>
    <div class='group-form__field'>
      <div class='group-form__field--left'></div>
      <div class='group-form__field--right'>
        <%= f.submit class: 'group-form__action-btn'%>
      </div>
    </div>
  <% end %>
</div>

<div class="contents">
  <p><%= @name %>さんの投稿一覧</p>
  <% @tweets.each do |tweet| %>
    <div class="content_post">
      <p><%= tweet.title %></p>
      <p><%= tweet.content %></p>

      <% if tweet.attachment.attached? %>
        <% fullfilename = rails_blob_path(tweet.attachment) %>
        <% @ext = File.extname(fullfilename).downcase %>

        <% if @ext == ".jpg" || @ext == ".jpeg" || @ext == ".png" || @ext == ".gif" || @ext == ".heic" %>
          <%= image_tag rails_blob_path(tweet.attachment), width: "150px" %>
        <% elsif @ext == ".mp4" || @ext == ".avi" || @ext == ".webm" || @ext == ".flv" %>
          <%= video_tag rails_blob_path(tweet.attachment), width: "150px", controls: true, playsinline: true %>
        <% end %>
      <% end %>

    </div>
  <% end %>
</div>
